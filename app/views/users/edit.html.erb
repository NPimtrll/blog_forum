<h2 class="text-2xl font-bold text-center mb-6">แก้ไขโปรไฟล์</h2>

<%= form_with(model: @user, local: true, html: { class: "w-full max-w-md mx-auto bg-white p-6 rounded-lg shadow-md" }) do |form| %>

  <!-- Full Name -->
  <div class="mb-4">
    <%= form.label :full_name, "Full name", class: "block text-gray-700 font-semibold mb-2" %>
    <%= form.text_field :full_name, class: "w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
  </div>

  <!-- Email -->
  <div class="mb-4">
    <%= form.label :email, class: "block text-gray-700 font-semibold mb-2" %>
    <%= form.text_field :email, disabled: true, class: "w-full p-2 border rounded-lg bg-gray-100 cursor-not-allowed" %>
  </div>

  <!-- Username -->
  <div class="mb-4">
    <%= form.label :username, class: "block text-gray-700 font-semibold mb-2" %>
    <%= form.text_field :username, class: "w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
  </div>

  <!-- About Me -->
  <div class="mb-4">
    <%= form.label :about_me, "เกี่ยวกับฉัน", class: "block text-gray-700 font-semibold mb-2" %>
    <%= form.text_area :about_me, class: "w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" %>
  </div>

  <!-- Social Media Links -->
  <h3 class="font-bold">ลิงก์โซเชียลมีเดีย</h3>
  <div class="mb-4">
    <%= form.label :twitter_url, "Twitter", class: "block text-gray-700 font-semibold" %>
    <%= form.text_field :twitter_url, class: "w-full p-2 border rounded-lg" %>

    <%= form.label :linkedin_url, "LinkedIn", class: "block text-gray-700 font-semibold mt-2" %>
    <%= form.text_field :linkedin_url, class: "w-full p-2 border rounded-lg" %>

    <%= form.label :github_url, "GitHub", class: "block text-gray-700 font-semibold mt-2" %>
    <%= form.text_field :github_url, class: "w-full p-2 border rounded-lg" %>
  </div>

  <!-- Avatar Upload -->
  <div class="mb-4">
    <%= form.label :avatar, "อัปโหลดรูปโปรไฟล์", class: "block text-gray-700 font-semibold mb-2" %>
    <%= form.file_field :avatar, class: "w-full p-2 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-400" %>
  </div>

  <!-- Current Avatar Preview -->
  <% if @user.avatar.attached? %>
      <div class="flex justify-center mb-4">
        <%= image_tag url_for(@user.avatar), class: "w-32 h-32 rounded-full border-4 border-gray-300" %>
      </div>
    <% else %>
      <p class="text-center text-gray-600">ไม่มีรูปโปรไฟล์</p>
    <% end %>

  <!-- Toggle Switches -->
  <h3 class="font-bold">ตั้งค่าบัญชี</h3>
  <div class="mb-4 flex items-center">
    <%= form.check_box :email_notifications, class: "mr-2" %>
    <%= form.label :email_notifications, "รับการแจ้งเตือนทางอีเมล", class: "text-gray-700" %>
  </div>

  <div class="mb-4 flex items-center">
    <%= form.check_box :profile_privacy, class: "mr-2" %>
    <%= form.label :profile_privacy, "เปิดโปรไฟล์เป็นสาธารณะ", class: "text-gray-700" %>
  </div>

  <!-- Submit Button -->
  <div class="mt-6">
    <%= form.submit "บันทึกการเปลี่ยนแปลง", class: "w-full bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-200 border border-black" %>
  </div>

<% end %>

<!-- Delete Account Button -->
<%# <div class="mt-6 text-center">
  <button class="bg-red-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-600 transition duration-200" onclick="confirmDelete()">ลบบัญชี</button>
</div>

<!-- Confirm Delete Modal -->
<div id="deleteModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center">
  <div class="bg-white p-6 rounded-lg shadow-lg">
    <h3 class="text-xl font-semibold mb-4">คุณแน่ใจหรือไม่ว่าต้องการลบบัญชี?</h3>
    <p class="text-gray-600 mb-4">การลบนี้ไม่สามารถย้อนกลับได้</p>
    <div class="flex justify-end">
      <button class="mr-2 bg-gray-500 text-white py-2 px-4 rounded-lg" onclick="closeModal()">ยกเลิก</button>
      <%= button_to "ลบบัญชี", user_path(@user), method: :delete, data: { confirm: "แน่ใจหรือไม่?" }, class: "bg-red-500 text-white py-2 px-4 rounded-lg" %>
    <%# </div>
  </div>
</div> %>

<!-- JavaScript -->
<%# <script>
  function confirmDelete() {
    document.getElementById("deleteModal").classList.remove("hidden");
  }

  function closeModal() {
    document.getElementById("deleteModal").classList.add("hidden");
  }
</script> %>
