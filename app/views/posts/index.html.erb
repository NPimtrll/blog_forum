<div class="w-full">
  <%= render "shared/breadcrumb" %>

  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="flex justify-between items-center mb-5">
    <h1 class="font-bold text-4xl">Posts</h1>
    <%= link_to "New post", new_post_path, class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white block font-medium" %>
  </div>

  <div id="posts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% if @posts.any? %>
      <% @posts.each do |post| %>
        <div class="bg-white rounded-2xl shadow-md overflow-hidden">
          <div class="relative">
            <%= link_to post_path(post), class: "block hover:opacity-90" do %>
              <% if post.cover_image.attached? %>
                <%= image_tag post.cover_image, class: "w-full h-48 object-cover" %>
              <% else %>
                <%= image_tag "article-default.png", class: "w-full h-48 object-cover" %>
              <% end %>
            <% end %>
            <% if post.category.present? %>
              <div class="absolute top-4 right-4 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-semibold">
                <%= post.category.name %>
              </div>
            <% end %>
          </div>

          <div class="p-4">
            <h2 class="text-xl font-bold text-gray-800 truncate"><%= post.title %></h2>
            <p class="text-gray-600 mt-2 line-clamp-2"><%= post.excerpt.presence || post.content.truncate(100) %></p>

            <div class="flex justify-between items-center mt-4 text-sm text-gray-500">
              <span><%= post.created_at.strftime("%b %d, %Y") %></span>
              <span class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
                <%= post.views %>
              </span>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="text-center my-10">No posts found.</p>
    <% end %>
  </div>
</div>
