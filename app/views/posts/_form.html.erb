<%= form_with(model: post, class: "contents", local: true, html: { multipart: true }) do |form| %>
  <% if post.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3">
      <h2><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h2>
      <ul class="list-disc ml-6">
        <% post.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="my-5">
    <%= form.label :title, "หัวข้อ"  %>
    <%= form.text_field :title, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full", {"border-gray-400 focus:outline-blue-600": post.errors[:title].none?, "border-red-400 focus:outline-red-600": post.errors[:title].any?}] %>
  </div>

  <div class="my-5">
    <%= form.label :category_id, "Categories*", class: "block mb-2" %>
    <div class="flex flex-wrap gap-2">
      <% Category.all.each do |category| %>
        <label class="inline-flex items-center">
          <%= form.radio_button :category_id, category.id, class: "hidden peer" %>
          <span class="px-4 py-2 rounded-full cursor-pointer
            <%= category.id == post.category_id ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600' %>
            peer-checked:bg-blue-100 peer-checked:text-blue-600 hover:bg-gray-200">
            <%= category.name %>
          </span>
        </label>
      <% end %>
      <%= link_to "+ Add Category", new_category_path, class: "inline-flex items-center px-4 py-2 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200" %>
    </div>
  </div>

  <div class="my-5">
    <%= form.label :excerpt, "คำโปรย" %>
    <%= form.text_area :excerpt, rows: 3, class: "block shadow-sm rounded-md border px-3 py-2 mt-2 w-full" %>
  </div>

  <div class="my-5">
    <%= form.label :cover_image, "อัปโหลดรูปปก" %>
    <%= form.file_field :cover_image, class: "block shadow-sm rounded-md border px-3 py-2 mt-2 w-full" %>
  </div>

  <div class="my-5">
    <%= form.label :content %>
    <%= form.text_area :content, class: "tinymce", data: { controller: "tinymce" } %>
  </div>

  <%= form.hidden_field :user_id, value: current_user.id %>

  <div class="inline">
    <%= form.submit class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white inline-block font-medium cursor-pointer" %>
  </div>
<% end %>

<%= tinymce %>
